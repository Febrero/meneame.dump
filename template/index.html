<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Informe de datos de meneame.net</title>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    {% for c in css %}
      <link href="{{c}}" rel="stylesheet" type="text/css" data-autoinsert="1"/>
    {% endfor %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    {% for js in javascript %}
      <script src="{{js}}" data-autoinsert="1"></script>
    {% endfor %}
  </head>
  <body>
    <p>
      Este informe abarca la <a href="https://www.meneame.net/">portada</a> y
      <a href="https://www.meneame.net/queue">cola</a> de la edición general
      de <code>meneame.net</code> desde
      <a href="https://www.meneame.net/story/{{st.min_portada}}"><code>{{st.min_date.strftime("%d/%m/%Y")}}</code></a>
      a
      <a href="https://www.meneame.net/story/{{st.max_portada}}"><code>{{st.max_date.strftime("%d/%m/%Y %H:%M")}}</code></a>,
      lo que representa
      <code>{{st.counts.comments.total | millar }}</code> comentarios y
      <code>{{st.counts.links.total | millar }}</code> noticias repartidas en:
    </p>
    <table>
      <thead>
        <tr>
          <th>Estado</th>
          <th>Noticias</th>
          <th>Comentarios</th>
        </tr>
      </thead>
      <tbody>
   {% for s, c in st.counts.links.status %}
        <tr>
          <td>{{s}}</td>
          <td class="rg"><code>{{c | millar}}</code></td>
          <td class="rg"><code>{{st.counts.comments.status[s] | millar}}</code></td>
        </tr>
   {% endfor%}
     </tbody>
    </table>
  </body>
  <p>Para ver en más detalle que enlaces se han descartado para evitar ruido puedes consultar
    <a href="https://github.com/s-nt-s/meneame.dump/blob/master/sql/views/general.sql">la sentencia sql</a> que ha servido de fuente.
  <h1>Méneame a traves del tiempo</h1>
  <h2>¿A qué hora se envian las noticias?</h2>
  <div class="data" data-modelo="horas_dia" data-porcentaje="0">
    <p>Calcular 'un día normal' usando datos de <select id="yearsDiaNormal">
      <option>todos los años</option>
      {% for y in years_completos %}
        <option value="{{y}}">{{y}}</option>
      {% endfor %}
    </select> y mostrando la cantidades como <select name="porcentaje">
      <option value="0">promedio de noticias enviadas a la hora</option>
      <option value="1">% de noticias enviadas con respecto al día completo</option>
    </select>
    <canvas></canvas>
    (*) La linea <code>published</code> señala a que hora fueron enviadas las noticias que, más tarde, terminaron
    siendo publicadas en portada, no a que hora llegaron a la portada.
  </div>
  <h2>¿Cuántas noticias hay por estado?</h2>
  <div class="data" data-modelo="count_estados">
    <p>Mostrar cantidad de noticias en <select name="porcentaje">
      <option value="1">% del total</option>
      <option value="0">números absolutos</option>
    </select>
    </p>
    <canvas></canvas>
  </div>
  <h2>¿Cuántas noticias hay por categoría/sub?</h2>
  <div class="data">
    <p>Mostrar cantidad de noticias en <select name="porcentaje">
      <option value="1">% del total</option>
      <option value="0">números absolutos</option>
    </select>
    usando <select name="modelo">
      <option value="count_categorias_todas">todas las noticias</option>
      <option value="count_categorias_published">solo las noticias que llegaron a portada</option>
    </select>
    </p>
    <canvas></canvas>
    <p>
      (*) Antes de 2014 más del 98% de las noticias estan en la categoría <code>mnm</code>
    <p>
  </div>
  <h2>¿Qué más me puedes decir?</h2>
  <div class="data">
    <p>Mostrar datos de <select name="modelo">
      <option value="misce_general">todo (menos autodiscard y abuse)</option>
      <option value="misce_portada">la portada (published)</option>
      <option value="misce_actualidad">la portada en la categoría actualidad</option>
    </select>
    </p>
    <canvas></canvas>
    <p>(*) Para las métricas de votos no se tienen en cuenta ni los votos anónimos
      ni el primer voto de cada noticia (pues corresponde al usuario que envió la noticia).</p>
  </div>
</html>
